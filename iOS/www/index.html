<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
       <p>Pull to refresh :)</p>

        <script type="text/javascript" src="zepto.js"></script>
        <script type="text/javascript" src="cobalt/cobalt.js"></script>
        
        <script>
            Zepto(function($){
                
                cobalt.init({
                    debug:true,
                    //debugInBrowser:true,
                    events:{
                        "pullToRefresh" : function(data,callback){
                            cobalt.log('Refresh');                           
                            refreshContent(function(){
                            	cobalt.sendCallback(callback);
                            });
                           
                        }
                    }
                });				
				
		/* enable this to test webLayer
		$('p').on('tap',function(){
		cobalt.webLayer('show','webLayerExample.html');
		})
		*/
                
            });
			
			
			
			
			function refreshContent( callback ){
				cobalt.log('refreshing content')
			
	            var hellos=new Array("Hello !","Bonjour !","Guten tag !","Ola !");
	            var randomitem = hellos[ Math.floor( Math.random() * hellos.length )];
	            $('p').html(randomitem);
			
				if (callback){
					callback();
				}
			
			}
            
        </script>
    </body>
</html>
